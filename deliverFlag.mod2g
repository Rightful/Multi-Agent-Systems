use UTbot as knowledge.
use Action as actionspec.
use PickupHealth as module.
use PickupOther as module.
exit = never.
order = linearall.
module deliverFlag {
	
		if bel(status(Health,_), enemyFlagNotHome, Health < 30,(pickup(ID,'health',_),item(_,_,_,ID)), not(navigation('noPath',_)), not(navigation('stuck',_))) then stop + PickupHealth.
		
		if bel(item(_,_,_,ID), pickup(ID,'other','invulnerability'), not(navigation('noPath',_)), not(navigation('stuck',_))) then stop + PickupOther.
		
		% if you see our dropped flag, then pick it up.
		if bel(droppedFlagAt(LOC), navigation(navigation,ID), not(ID=LOC)) then stop.
		if bel(droppedFlagAt(LOC), not(navigation(navigation,_))) then navigate(LOC).
		
		% exit if you dont have opponent flag.
		if bel(self(Player,_,Team), not(flag(_,Player,_)), navigation(navigating,_)) then stop + exit-module.
		if bel(self(Player,_,Team), not(flag(_,Player,_)), not(navigation(navigating,_))) then exit-module.
	
		% if you have the flag go to your own base
		if bel(holdingFlag, ourBaseLocation(ID), navigation(navigating,NAV), ID\=NAV) then navigate(ID).
}